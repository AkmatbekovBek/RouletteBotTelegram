2025-11-16 22:09:02,087 - [INFO] - __main__ - (main.py).main(315) - üîÑ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
2025-11-16 22:09:03,418 - [INFO] - aiogram - (executor.py)._welcome(362) - Bot: —Ç–µ—Å—Ç–∞–π—Å [@testaicebot]
2025-11-16 22:09:03,627 - [WARNING] - aiogram - (executor.py)._skip_updates(358) - Updates were skipped successfully.
2025-11-16 22:09:03,627 - [INFO] - __main__ - (main.py).on_startup(224) - üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
2025-11-16 22:09:03,627 - [INFO] - __main__ - (main.py).on_startup(227) - üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:09:03,806 - [INFO] - __main__ - (main.py).setup_database(88) - ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω—ã
2025-11-16 22:09:03,809 - [INFO] - __main__ - (main.py).setup_database(95) - ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
2025-11-16 22:09:03,810 - [INFO] - __main__ - (main.py).on_startup(231) - üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:09:03,827 - [INFO] - __main__ - (main.py).cleanup_old_limits(120) - ‚úÖ –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –ª–∏–º–∏—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
2025-11-16 22:09:03,829 - [INFO] - __main__ - (main.py).setup_middleware_first(136) - üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ middleware...
2025-11-16 22:09:03,829 - [INFO] - __main__ - (main.py).setup_middleware_first(140) - ‚úÖ AutoRegisterMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:09:03,829 - [INFO] - __main__ - (main.py).setup_middleware_first(148) - ‚úÖ ThrottlingMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è 16 –∫–æ–º–∞–Ω–¥
2025-11-16 22:09:03,829 - [INFO] - __main__ - (main.py).on_startup(239) - üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:09:03,829 - [INFO] - __main__ - (main.py).register_all_handlers(159) - üîÑ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:09:03,837 - [ERROR] - __main__ - (main.py).register_all_handlers(179) - ‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ start: cannot import name 'RouletteHandler' from 'handlers.roulette' (C:\RouletteBotTelegram\handlers\roulette\__init__.py)
2025-11-16 22:09:03,839 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ admin –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,840 - [INFO] - root - (shop.py).register_shop_handlers(483) - ‚úÖ –ú–∞–≥–∞–∑–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –ì–õ–û–ë–ê–õ–¨–ù–û–ô –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:09:03,840 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ shop –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,846 - [INFO] - handlers.donate - (donate.py)._init_bonus_table(128) - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ user_bonuses —Å–æ–∑–¥–∞–Ω–∞/–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
2025-11-16 22:09:03,847 - [INFO] - root - (donate.py).register_donate_handlers(955) - ‚úÖ –î–æ–Ω–∞—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –±–æ–Ω—É—Å–∞–º–∏ –∑–∞ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏)
2025-11-16 22:09:03,848 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ donate –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,851 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_main_menu
2025-11-16 22:09:03,851 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_admin_users_list
2025-11-16 22:09:03,851 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,854 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ reference –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,857 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ transfer –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,859 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ history_service –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,861 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ record –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,861 - [INFO] - venv - (gifts.py).register_gift_handlers(983) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ–¥–∞—Ä–∫–æ–≤
2025-11-16 22:09:03,861 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ gifts –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,865 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ marriage_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,865 - [ERROR] - __main__ - (main.py).register_all_handlers(179) - ‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ roulette: module 'handlers.roulette' has no attribute 'register_roulette_handlers'
2025-11-16 22:09:03,870 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ police –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,875 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ thief –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,877 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(863) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç –∏—â–∏' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (–¢–û–ß–ù–´–ï –∫–æ–º–∞–Ω–¥—ã)
2025-11-16 22:09:03,877 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(864) - üìù –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –≤–∫–ª—é—á–µ–Ω –¥–ª—è 19 –∫–æ–º–∞–Ω–¥
2025-11-16 22:09:03,877 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(865) - üõ°Ô∏è ID —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞—â–∏—Ç—ã: [4]
2025-11-16 22:09:03,877 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_search_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,880 - [INFO] - handlers.chat_handlers - (chat_handlers.py).register_chat_handlers(126) - ‚úÖ Chat handlers registered
2025-11-16 22:09:03,880 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ chat_handlers –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,881 - [INFO] - handlers.bot_stop_handler - (bot_stop_handler.py).register_bot_stop_handlers(482) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç —Å—Ç–æ–ø' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∏ –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:09:03,881 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_stop_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:09:03,881 - [INFO] - __main__ - (main.py).register_all_handlers(183) - ‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –í—Å–µ–≥–æ: 15
2025-11-16 22:09:03,881 - [INFO] - venv - (gifts.py).ensure_gifts_on_startup(949) - üéÅ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:09:03,887 - [INFO] - venv - (gifts.py).ensure_gifts_exist(246) - ‚úÖ –í—Å–µ –ø–æ–¥–∞—Ä–∫–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ
2025-11-16 22:09:03,887 - [INFO] - __main__ - (main.py).setup_bot_ban_middleware(192) - ‚úÖ BotBanMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:09:03,887 - [INFO] - __main__ - (main.py).on_startup(250) - ‚è∞ –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:09:03,888 - [INFO] - __main__ - (main.py).start_cleanup_tasks(206) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –ë–î –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:09:03,888 - [INFO] - __main__ - (main.py).start_cleanup_tasks(211) - ‚úÖ –ó–∞–¥–∞—á–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –∑–∞–ø—É—â–µ–Ω—ã
2025-11-16 22:09:03,888 - [INFO] - handlers.admin.mute_ban - (mute_ban.py).restore_mutes_after_restart(204) - ‚è≠Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º—É—Ç–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
2025-11-16 22:09:03,888 - [INFO] - __main__ - (main.py).start_cleanup_tasks(215) - ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ –º—É—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
2025-11-16 22:09:03,888 - [INFO] - __main__ - (main.py).on_startup(253) - ‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:09:03,888 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(38) - üîÑ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:09:03,888 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(54) - ‚è∞ –°–ª–µ–¥—É—é—â–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ 6656 —Å–µ–∫—É–Ω–¥ (1.8 —á–∞—Å–æ–≤)
2025-11-16 22:09:03,888 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(358) - Start polling.
2025-11-16 22:09:21,341 - [INFO] - __main__ - (main.py).signal_handler(307) - üìû –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª 2. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...
2025-11-16 22:09:21,341 - [INFO] - __main__ - (main.py).on_shutdown(258) - üõë –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞...
2025-11-16 22:09:21,341 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(147) - üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:09:21,341 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(156) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:09:21,341 - [INFO] - __main__ - (main.py).on_shutdown(266) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:09:21,341 - [INFO] - __main__ - (main.py).on_shutdown(275) - ‚úÖ –ó–∞–¥–∞—á–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2025-11-16 22:09:21,342 - [INFO] - __main__ - (main.py).on_shutdown(283) - ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î –∑–∞–∫—Ä—ã—Ç—ã
2025-11-16 22:09:21,342 - [INFO] - __main__ - (main.py).on_shutdown(291) - ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∑–∞–∫—Ä—ã—Ç–æ
2025-11-16 22:09:21,342 - [INFO] - __main__ - (main.py).on_shutdown(298) - ‚úÖ –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:09:21,342 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).stop_polling(433) - Stop polling...
2025-11-16 22:09:21,342 - [ERROR] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(390) - Cause exception while getting updates.
Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 139, in make_request
    async with session.post(url, data=req, **kwargs) as response:
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 1488, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 770, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 748, in _connect_and_send_request
    await resp.start(conn)
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client_reqrep.py", line 532, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\streams.py", line 672, in read
    await self._waiter
aiohttp.client_exceptions.ServerDisconnectedError: Server disconnected

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 381, in start_polling
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\bot.py", line 110, in get_updates
    result = await self.request(api.Methods.GET_UPDATES, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\base.py", line 236, in request
    return await api.make_request(await self.get_session(), self.server, self.__token, method, data, files,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 142, in make_request
    raise exceptions.NetworkError(f"aiohttp client throws an error: {e.__class__.__name__}: {e}")
aiogram.utils.exceptions.NetworkError: Aiohttp client throws an error: ServerDisconnectedError: Server disconnected
2025-11-16 22:09:21,351 - [WARNING] - aiogram - (executor.py).start_polling(329) - Goodbye!
2025-11-16 22:24:44,819 - [INFO] - __main__ - (main.py).main(315) - üîÑ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
2025-11-16 22:24:45,162 - [INFO] - aiogram - (executor.py)._welcome(362) - Bot: —Ç–µ—Å—Ç–∞–π—Å [@testaicebot]
2025-11-16 22:24:45,378 - [WARNING] - aiogram - (executor.py)._skip_updates(358) - Updates were skipped successfully.
2025-11-16 22:24:45,378 - [INFO] - __main__ - (main.py).on_startup(224) - üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
2025-11-16 22:24:45,378 - [INFO] - __main__ - (main.py).on_startup(227) - üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:24:45,455 - [INFO] - __main__ - (main.py).setup_database(88) - ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω—ã
2025-11-16 22:24:45,456 - [INFO] - __main__ - (main.py).setup_database(95) - ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
2025-11-16 22:24:45,456 - [INFO] - __main__ - (main.py).on_startup(231) - üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:24:45,475 - [INFO] - __main__ - (main.py).cleanup_old_limits(120) - ‚úÖ –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –ª–∏–º–∏—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
2025-11-16 22:24:45,476 - [INFO] - __main__ - (main.py).setup_middleware_first(136) - üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ middleware...
2025-11-16 22:24:45,476 - [INFO] - __main__ - (main.py).setup_middleware_first(140) - ‚úÖ AutoRegisterMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:24:45,476 - [INFO] - __main__ - (main.py).setup_middleware_first(148) - ‚úÖ ThrottlingMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è 16 –∫–æ–º–∞–Ω–¥
2025-11-16 22:24:45,476 - [INFO] - __main__ - (main.py).on_startup(239) - üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:24:45,476 - [INFO] - __main__ - (main.py).register_all_handlers(159) - üîÑ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:24:45,499 - [ERROR] - __main__ - (main.py).register_all_handlers(179) - ‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ start: cannot import name 'Bet' from 'database.models' (C:\RouletteBotTelegram\database\models.py)
2025-11-16 22:24:45,501 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ admin –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,502 - [INFO] - root - (shop.py).register_shop_handlers(483) - ‚úÖ –ú–∞–≥–∞–∑–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –ì–õ–û–ë–ê–õ–¨–ù–û–ô –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:24:45,502 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ shop –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,505 - [INFO] - handlers.donate - (donate.py)._init_bonus_table(128) - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ user_bonuses —Å–æ–∑–¥–∞–Ω–∞/–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
2025-11-16 22:24:45,506 - [INFO] - root - (donate.py).register_donate_handlers(955) - ‚úÖ –î–æ–Ω–∞—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –±–æ–Ω—É—Å–∞–º–∏ –∑–∞ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏)
2025-11-16 22:24:45,506 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ donate –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,511 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_main_menu
2025-11-16 22:24:45,511 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_admin_users_list
2025-11-16 22:24:45,511 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,513 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ reference –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,514 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ transfer –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,515 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ history_service –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,516 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ record –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,517 - [INFO] - venv - (gifts.py).register_gift_handlers(983) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ–¥–∞—Ä–∫–æ–≤
2025-11-16 22:24:45,517 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ gifts –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,519 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ marriage_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,521 - [ERROR] - __main__ - (main.py).register_all_handlers(179) - ‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ roulette: cannot import name 'Bet' from 'database.models' (C:\RouletteBotTelegram\database\models.py)
2025-11-16 22:24:45,524 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ police –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,526 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ thief –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,527 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(863) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç –∏—â–∏' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (–¢–û–ß–ù–´–ï –∫–æ–º–∞–Ω–¥—ã)
2025-11-16 22:24:45,527 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(864) - üìù –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –≤–∫–ª—é—á–µ–Ω –¥–ª—è 19 –∫–æ–º–∞–Ω–¥
2025-11-16 22:24:45,527 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(865) - üõ°Ô∏è ID —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞—â–∏—Ç—ã: [4]
2025-11-16 22:24:45,527 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_search_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,528 - [INFO] - handlers.chat_handlers - (chat_handlers.py).register_chat_handlers(126) - ‚úÖ Chat handlers registered
2025-11-16 22:24:45,528 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ chat_handlers –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,530 - [INFO] - handlers.bot_stop_handler - (bot_stop_handler.py).register_bot_stop_handlers(482) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç —Å—Ç–æ–ø' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∏ –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:24:45,530 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_stop_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:24:45,530 - [INFO] - __main__ - (main.py).register_all_handlers(183) - ‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –í—Å–µ–≥–æ: 15
2025-11-16 22:24:45,530 - [INFO] - venv - (gifts.py).ensure_gifts_on_startup(949) - üéÅ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:24:45,535 - [INFO] - venv - (gifts.py).ensure_gifts_exist(246) - ‚úÖ –í—Å–µ –ø–æ–¥–∞—Ä–∫–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ
2025-11-16 22:24:45,535 - [INFO] - __main__ - (main.py).setup_bot_ban_middleware(192) - ‚úÖ BotBanMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:24:45,535 - [INFO] - __main__ - (main.py).on_startup(250) - ‚è∞ –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:24:45,535 - [INFO] - __main__ - (main.py).start_cleanup_tasks(206) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –ë–î –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:24:45,535 - [INFO] - __main__ - (main.py).start_cleanup_tasks(211) - ‚úÖ –ó–∞–¥–∞—á–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –∑–∞–ø—É—â–µ–Ω—ã
2025-11-16 22:24:45,535 - [INFO] - handlers.admin.mute_ban - (mute_ban.py).restore_mutes_after_restart(204) - ‚è≠Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º—É—Ç–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
2025-11-16 22:24:45,535 - [INFO] - __main__ - (main.py).start_cleanup_tasks(215) - ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ –º—É—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
2025-11-16 22:24:45,535 - [INFO] - __main__ - (main.py).on_startup(253) - ‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:24:45,536 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(38) - üîÑ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:24:45,536 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(54) - ‚è∞ –°–ª–µ–¥—É—é—â–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ 5714 —Å–µ–∫—É–Ω–¥ (1.6 —á–∞—Å–æ–≤)
2025-11-16 22:24:45,536 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(358) - Start polling.
2025-11-16 22:24:51,889 - [INFO] - __main__ - (main.py).signal_handler(307) - üìû –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª 2. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...
2025-11-16 22:24:51,890 - [INFO] - __main__ - (main.py).on_shutdown(258) - üõë –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞...
2025-11-16 22:24:51,890 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(147) - üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:24:51,890 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(156) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:24:51,890 - [INFO] - __main__ - (main.py).on_shutdown(266) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:24:51,890 - [INFO] - __main__ - (main.py).on_shutdown(275) - ‚úÖ –ó–∞–¥–∞—á–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2025-11-16 22:24:51,890 - [INFO] - __main__ - (main.py).on_shutdown(283) - ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î –∑–∞–∫—Ä—ã—Ç—ã
2025-11-16 22:24:51,890 - [INFO] - __main__ - (main.py).on_shutdown(291) - ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∑–∞–∫—Ä—ã—Ç–æ
2025-11-16 22:24:51,891 - [INFO] - __main__ - (main.py).on_shutdown(298) - ‚úÖ –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:24:51,891 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).stop_polling(433) - Stop polling...
2025-11-16 22:24:51,891 - [ERROR] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(390) - Cause exception while getting updates.
Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 139, in make_request
    async with session.post(url, data=req, **kwargs) as response:
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 1488, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 770, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 748, in _connect_and_send_request
    await resp.start(conn)
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client_reqrep.py", line 532, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\streams.py", line 672, in read
    await self._waiter
aiohttp.client_exceptions.ServerDisconnectedError: Server disconnected

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 381, in start_polling
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\bot.py", line 110, in get_updates
    result = await self.request(api.Methods.GET_UPDATES, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\base.py", line 236, in request
    return await api.make_request(await self.get_session(), self.server, self.__token, method, data, files,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 142, in make_request
    raise exceptions.NetworkError(f"aiohttp client throws an error: {e.__class__.__name__}: {e}")
aiogram.utils.exceptions.NetworkError: Aiohttp client throws an error: ServerDisconnectedError: Server disconnected
2025-11-16 22:24:51,896 - [WARNING] - aiogram - (executor.py).start_polling(329) - Goodbye!
2025-11-16 22:28:29,590 - [INFO] - __main__ - (main.py).main(315) - üîÑ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
2025-11-16 22:28:29,917 - [INFO] - aiogram - (executor.py)._welcome(362) - Bot: —Ç–µ—Å—Ç–∞–π—Å [@testaicebot]
2025-11-16 22:28:30,123 - [WARNING] - aiogram - (executor.py)._skip_updates(358) - Updates were skipped successfully.
2025-11-16 22:28:30,123 - [INFO] - __main__ - (main.py).on_startup(224) - üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
2025-11-16 22:28:30,123 - [INFO] - __main__ - (main.py).on_startup(227) - üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:28:30,305 - [INFO] - __main__ - (main.py).setup_database(88) - ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω—ã
2025-11-16 22:28:30,307 - [INFO] - __main__ - (main.py).setup_database(95) - ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
2025-11-16 22:28:30,307 - [INFO] - __main__ - (main.py).on_startup(231) - üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:28:30,336 - [INFO] - __main__ - (main.py).cleanup_old_limits(120) - ‚úÖ –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –ª–∏–º–∏—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
2025-11-16 22:28:30,338 - [INFO] - __main__ - (main.py).setup_middleware_first(136) - üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ middleware...
2025-11-16 22:28:30,338 - [INFO] - __main__ - (main.py).setup_middleware_first(140) - ‚úÖ AutoRegisterMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:28:30,338 - [INFO] - __main__ - (main.py).setup_middleware_first(148) - ‚úÖ ThrottlingMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è 16 –∫–æ–º–∞–Ω–¥
2025-11-16 22:28:30,338 - [INFO] - __main__ - (main.py).on_startup(239) - üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:28:30,338 - [INFO] - __main__ - (main.py).register_all_handlers(159) - üîÑ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:28:30,380 - [INFO] - root - (start.py).register_start_handler(778) - ‚úÖ –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,380 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ start –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,384 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ admin –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,384 - [INFO] - root - (shop.py).register_shop_handlers(483) - ‚úÖ –ú–∞–≥–∞–∑–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –ì–õ–û–ë–ê–õ–¨–ù–û–ô –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:28:30,385 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ shop –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,389 - [INFO] - handlers.donate - (donate.py)._init_bonus_table(128) - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ user_bonuses —Å–æ–∑–¥–∞–Ω–∞/–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
2025-11-16 22:28:30,390 - [INFO] - root - (donate.py).register_donate_handlers(955) - ‚úÖ –î–æ–Ω–∞—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –±–æ–Ω—É—Å–∞–º–∏ –∑–∞ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏)
2025-11-16 22:28:30,390 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ donate –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,391 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_main_menu
2025-11-16 22:28:30,392 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_admin_users_list
2025-11-16 22:28:30,392 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,392 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ reference –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,394 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ transfer –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,395 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ history_service –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,397 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ record –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,398 - [INFO] - venv - (gifts.py).register_gift_handlers(983) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ–¥–∞—Ä–∫–æ–≤
2025-11-16 22:28:30,398 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ gifts –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,400 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ marriage_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,401 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ roulette –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,404 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ police –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,408 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ thief –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,410 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(863) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç –∏—â–∏' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (–¢–û–ß–ù–´–ï –∫–æ–º–∞–Ω–¥—ã)
2025-11-16 22:28:30,410 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(864) - üìù –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –≤–∫–ª—é—á–µ–Ω –¥–ª—è 19 –∫–æ–º–∞–Ω–¥
2025-11-16 22:28:30,410 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(865) - üõ°Ô∏è ID —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞—â–∏—Ç—ã: [4]
2025-11-16 22:28:30,410 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_search_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,411 - [INFO] - handlers.chat_handlers - (chat_handlers.py).register_chat_handlers(126) - ‚úÖ Chat handlers registered
2025-11-16 22:28:30,411 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ chat_handlers –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,413 - [INFO] - handlers.bot_stop_handler - (bot_stop_handler.py).register_bot_stop_handlers(482) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç —Å—Ç–æ–ø' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∏ –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:28:30,413 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_stop_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:28:30,413 - [INFO] - __main__ - (main.py).register_all_handlers(183) - ‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –í—Å–µ–≥–æ: 17
2025-11-16 22:28:30,413 - [INFO] - venv - (gifts.py).ensure_gifts_on_startup(949) - üéÅ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:28:30,417 - [INFO] - venv - (gifts.py).ensure_gifts_exist(246) - ‚úÖ –í—Å–µ –ø–æ–¥–∞—Ä–∫–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ
2025-11-16 22:28:30,418 - [INFO] - __main__ - (main.py).setup_bot_ban_middleware(192) - ‚úÖ BotBanMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:28:30,418 - [INFO] - __main__ - (main.py).on_startup(250) - ‚è∞ –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:28:30,418 - [INFO] - __main__ - (main.py).start_cleanup_tasks(206) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –ë–î –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:28:30,418 - [INFO] - __main__ - (main.py).start_cleanup_tasks(211) - ‚úÖ –ó–∞–¥–∞—á–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –∑–∞–ø—É—â–µ–Ω—ã
2025-11-16 22:28:30,418 - [INFO] - handlers.admin.mute_ban - (mute_ban.py).restore_mutes_after_restart(204) - ‚è≠Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º—É—Ç–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
2025-11-16 22:28:30,418 - [INFO] - __main__ - (main.py).start_cleanup_tasks(215) - ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ –º—É—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
2025-11-16 22:28:30,418 - [INFO] - __main__ - (main.py).on_startup(253) - ‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:28:30,418 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(38) - üîÑ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:28:30,418 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(54) - ‚è∞ –°–ª–µ–¥—É—é—â–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ 5490 —Å–µ–∫—É–Ω–¥ (1.5 —á–∞—Å–æ–≤)
2025-11-16 22:28:30,418 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(358) - Start polling.
2025-11-16 22:28:34,197 - [ERROR] - asyncio - (base_events.py).default_exception_handler(1757) - Task exception was never retrieved
future: <Task finished name='Task-11' coro=<Dispatcher._process_polling_updates() done, defined at C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py:407> exception=NameError("name 'chat_id' is not defined")>
Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 415, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 235, in process_updates
    return await asyncio.gather(*tasks)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\handler.py", line 117, in notify
    response = await handler_obj.handler(*args, **partial_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 256, in process_update
    return await self.message_handlers.notify(update.message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\handler.py", line 101, in notify
    await self.dispatcher.middleware.trigger(f"pre_process_{self.middleware_key}", args + (data,))
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\middlewares.py", line 53, in trigger
    await app.trigger(action, args)
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\middlewares.py", line 106, in trigger
    await handler(*args)
  File "C:\RouletteBotTelegram\middlewares\bot_ban_middleware.py", line 41, in on_pre_process_message
    if await self.mute_ban_manager._is_user_admin(user_id, message.chat.id if message.chat else None,
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\RouletteBotTelegram\handlers\admin\mute_ban.py", line 45, in _is_user_admin
    if chat_id:
       ^^^^^^^
NameError: name 'chat_id' is not defined
2025-11-16 22:28:40,773 - [INFO] - __main__ - (main.py).signal_handler(307) - üìû –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª 2. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...
2025-11-16 22:28:40,773 - [INFO] - __main__ - (main.py).on_shutdown(258) - üõë –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞...
2025-11-16 22:28:40,773 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(147) - üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:28:40,773 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(156) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:28:40,773 - [INFO] - __main__ - (main.py).on_shutdown(266) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:28:40,773 - [INFO] - __main__ - (main.py).on_shutdown(275) - ‚úÖ –ó–∞–¥–∞—á–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2025-11-16 22:28:40,776 - [INFO] - __main__ - (main.py).on_shutdown(283) - ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î –∑–∞–∫—Ä—ã—Ç—ã
2025-11-16 22:28:40,776 - [INFO] - __main__ - (main.py).on_shutdown(291) - ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∑–∞–∫—Ä—ã—Ç–æ
2025-11-16 22:28:40,776 - [INFO] - __main__ - (main.py).on_shutdown(298) - ‚úÖ –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:28:40,776 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).stop_polling(433) - Stop polling...
2025-11-16 22:28:40,776 - [ERROR] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(390) - Cause exception while getting updates.
Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 139, in make_request
    async with session.post(url, data=req, **kwargs) as response:
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 1488, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 770, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 748, in _connect_and_send_request
    await resp.start(conn)
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client_reqrep.py", line 532, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\streams.py", line 672, in read
    await self._waiter
aiohttp.client_exceptions.ServerDisconnectedError: Server disconnected

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 381, in start_polling
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\bot.py", line 110, in get_updates
    result = await self.request(api.Methods.GET_UPDATES, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\base.py", line 236, in request
    return await api.make_request(await self.get_session(), self.server, self.__token, method, data, files,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 142, in make_request
    raise exceptions.NetworkError(f"aiohttp client throws an error: {e.__class__.__name__}: {e}")
aiogram.utils.exceptions.NetworkError: Aiohttp client throws an error: ServerDisconnectedError: Server disconnected
2025-11-16 22:28:40,779 - [WARNING] - aiogram - (executor.py).start_polling(329) - Goodbye!
2025-11-16 22:31:46,122 - [INFO] - __main__ - (main.py).main(315) - üîÑ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
2025-11-16 22:31:46,451 - [INFO] - aiogram - (executor.py)._welcome(362) - Bot: —Ç–µ—Å—Ç–∞–π—Å [@testaicebot]
2025-11-16 22:31:46,660 - [WARNING] - aiogram - (executor.py)._skip_updates(358) - Updates were skipped successfully.
2025-11-16 22:31:46,660 - [INFO] - __main__ - (main.py).on_startup(224) - üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
2025-11-16 22:31:46,660 - [INFO] - __main__ - (main.py).on_startup(227) - üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:31:46,734 - [INFO] - __main__ - (main.py).setup_database(88) - ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω—ã
2025-11-16 22:31:46,735 - [INFO] - __main__ - (main.py).setup_database(95) - ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
2025-11-16 22:31:46,735 - [INFO] - __main__ - (main.py).on_startup(231) - üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:31:46,763 - [INFO] - __main__ - (main.py).cleanup_old_limits(120) - ‚úÖ –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –ª–∏–º–∏—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
2025-11-16 22:31:46,763 - [INFO] - __main__ - (main.py).setup_middleware_first(136) - üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ middleware...
2025-11-16 22:31:46,763 - [INFO] - __main__ - (main.py).setup_middleware_first(140) - ‚úÖ AutoRegisterMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:31:46,763 - [INFO] - __main__ - (main.py).setup_middleware_first(148) - ‚úÖ ThrottlingMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è 16 –∫–æ–º–∞–Ω–¥
2025-11-16 22:31:46,763 - [INFO] - __main__ - (main.py).on_startup(239) - üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:31:46,763 - [INFO] - __main__ - (main.py).register_all_handlers(159) - üîÑ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:31:46,781 - [INFO] - root - (start.py).register_start_handler(778) - ‚úÖ –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,781 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ start –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,786 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ admin –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,786 - [INFO] - root - (shop.py).register_shop_handlers(483) - ‚úÖ –ú–∞–≥–∞–∑–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –ì–õ–û–ë–ê–õ–¨–ù–û–ô –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:31:46,786 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ shop –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,789 - [INFO] - handlers.donate - (donate.py)._init_bonus_table(128) - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ user_bonuses —Å–æ–∑–¥–∞–Ω–∞/–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
2025-11-16 22:31:46,790 - [INFO] - root - (donate.py).register_donate_handlers(955) - ‚úÖ –î–æ–Ω–∞—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –±–æ–Ω—É—Å–∞–º–∏ –∑–∞ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏)
2025-11-16 22:31:46,790 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ donate –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,792 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_main_menu
2025-11-16 22:31:46,792 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_admin_users_list
2025-11-16 22:31:46,792 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,793 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ reference –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,795 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ transfer –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,795 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ history_service –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,797 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ record –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,798 - [INFO] - venv - (gifts.py).register_gift_handlers(983) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ–¥–∞—Ä–∫–æ–≤
2025-11-16 22:31:46,798 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ gifts –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,800 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ marriage_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,801 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ roulette –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,805 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ police –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,807 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ thief –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,808 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(863) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç –∏—â–∏' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (–¢–û–ß–ù–´–ï –∫–æ–º–∞–Ω–¥—ã)
2025-11-16 22:31:46,808 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(864) - üìù –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –≤–∫–ª—é—á–µ–Ω –¥–ª—è 19 –∫–æ–º–∞–Ω–¥
2025-11-16 22:31:46,808 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(865) - üõ°Ô∏è ID —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞—â–∏—Ç—ã: [4]
2025-11-16 22:31:46,809 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_search_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,809 - [INFO] - handlers.chat_handlers - (chat_handlers.py).register_chat_handlers(126) - ‚úÖ Chat handlers registered
2025-11-16 22:31:46,809 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ chat_handlers –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,811 - [INFO] - handlers.bot_stop_handler - (bot_stop_handler.py).register_bot_stop_handlers(482) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç —Å—Ç–æ–ø' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∏ –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:31:46,811 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_stop_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:31:46,811 - [INFO] - __main__ - (main.py).register_all_handlers(183) - ‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –í—Å–µ–≥–æ: 17
2025-11-16 22:31:46,811 - [INFO] - venv - (gifts.py).ensure_gifts_on_startup(949) - üéÅ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:31:46,814 - [INFO] - venv - (gifts.py).ensure_gifts_exist(246) - ‚úÖ –í—Å–µ –ø–æ–¥–∞—Ä–∫–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ
2025-11-16 22:31:46,814 - [INFO] - __main__ - (main.py).setup_bot_ban_middleware(192) - ‚úÖ BotBanMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:31:46,816 - [INFO] - __main__ - (main.py).on_startup(250) - ‚è∞ –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:31:46,816 - [INFO] - __main__ - (main.py).start_cleanup_tasks(206) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –ë–î –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:31:46,816 - [INFO] - __main__ - (main.py).start_cleanup_tasks(211) - ‚úÖ –ó–∞–¥–∞—á–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –∑–∞–ø—É—â–µ–Ω—ã
2025-11-16 22:31:46,816 - [INFO] - handlers.admin.mute_ban - (mute_ban.py).restore_mutes_after_restart(204) - ‚è≠Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º—É—Ç–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
2025-11-16 22:31:46,816 - [INFO] - __main__ - (main.py).start_cleanup_tasks(215) - ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ –º—É—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
2025-11-16 22:31:46,816 - [INFO] - __main__ - (main.py).on_startup(253) - ‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:31:46,816 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(38) - üîÑ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:31:46,816 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(54) - ‚è∞ –°–ª–µ–¥—É—é—â–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ 5293 —Å–µ–∫—É–Ω–¥ (1.5 —á–∞—Å–æ–≤)
2025-11-16 22:31:46,816 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(358) - Start polling.
2025-11-16 22:31:51,129 - [ERROR] - asyncio - (base_events.py).default_exception_handler(1757) - Task exception was never retrieved
future: <Task finished name='Task-11' coro=<Dispatcher._process_polling_updates() done, defined at C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py:407> exception=TypeError('MuteBanManager._is_user_admin() takes from 2 to 3 positional arguments but 4 were given')>
Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 415, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 235, in process_updates
    return await asyncio.gather(*tasks)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\handler.py", line 117, in notify
    response = await handler_obj.handler(*args, **partial_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 256, in process_update
    return await self.message_handlers.notify(update.message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\handler.py", line 101, in notify
    await self.dispatcher.middleware.trigger(f"pre_process_{self.middleware_key}", args + (data,))
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\middlewares.py", line 53, in trigger
    await app.trigger(action, args)
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\middlewares.py", line 106, in trigger
    await handler(*args)
  File "C:\RouletteBotTelegram\middlewares\bot_ban_middleware.py", line 41, in on_pre_process_message
    if await self.mute_ban_manager._is_user_admin(user_id, message.chat.id if message.chat else None,
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: MuteBanManager._is_user_admin() takes from 2 to 3 positional arguments but 4 were given
2025-11-16 22:31:55,120 - [INFO] - __main__ - (main.py).signal_handler(307) - üìû –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª 2. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...
2025-11-16 22:31:55,120 - [INFO] - __main__ - (main.py).on_shutdown(258) - üõë –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞...
2025-11-16 22:31:55,120 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(147) - üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:31:55,120 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(156) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:31:55,120 - [INFO] - __main__ - (main.py).on_shutdown(266) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:31:55,120 - [INFO] - __main__ - (main.py).on_shutdown(275) - ‚úÖ –ó–∞–¥–∞—á–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2025-11-16 22:31:55,122 - [INFO] - __main__ - (main.py).on_shutdown(283) - ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î –∑–∞–∫—Ä—ã—Ç—ã
2025-11-16 22:31:55,122 - [INFO] - __main__ - (main.py).on_shutdown(291) - ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∑–∞–∫—Ä—ã—Ç–æ
2025-11-16 22:31:55,122 - [INFO] - __main__ - (main.py).on_shutdown(298) - ‚úÖ –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:31:55,122 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).stop_polling(433) - Stop polling...
2025-11-16 22:31:55,123 - [ERROR] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(390) - Cause exception while getting updates.
Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 139, in make_request
    async with session.post(url, data=req, **kwargs) as response:
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 1488, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 770, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 748, in _connect_and_send_request
    await resp.start(conn)
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client_reqrep.py", line 532, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\streams.py", line 672, in read
    await self._waiter
aiohttp.client_exceptions.ServerDisconnectedError: Server disconnected

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 381, in start_polling
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\bot.py", line 110, in get_updates
    result = await self.request(api.Methods.GET_UPDATES, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\base.py", line 236, in request
    return await api.make_request(await self.get_session(), self.server, self.__token, method, data, files,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 142, in make_request
    raise exceptions.NetworkError(f"aiohttp client throws an error: {e.__class__.__name__}: {e}")
aiogram.utils.exceptions.NetworkError: Aiohttp client throws an error: ServerDisconnectedError: Server disconnected
2025-11-16 22:31:55,125 - [WARNING] - aiogram - (executor.py).start_polling(329) - Goodbye!
2025-11-16 22:40:16,027 - [INFO] - __main__ - (main.py).main(315) - üîÑ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
2025-11-16 22:40:16,366 - [INFO] - aiogram - (executor.py)._welcome(362) - Bot: —Ç–µ—Å—Ç–∞–π—Å [@testaicebot]
2025-11-16 22:40:16,587 - [WARNING] - aiogram - (executor.py)._skip_updates(358) - Updates were skipped successfully.
2025-11-16 22:40:16,587 - [INFO] - __main__ - (main.py).on_startup(224) - üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
2025-11-16 22:40:16,587 - [INFO] - __main__ - (main.py).on_startup(227) - üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:40:16,665 - [INFO] - __main__ - (main.py).setup_database(88) - ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω—ã
2025-11-16 22:40:16,666 - [INFO] - __main__ - (main.py).setup_database(95) - ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
2025-11-16 22:40:16,666 - [INFO] - __main__ - (main.py).on_startup(231) - üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:40:16,686 - [INFO] - __main__ - (main.py).cleanup_old_limits(120) - ‚úÖ –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –ª–∏–º–∏—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
2025-11-16 22:40:16,687 - [INFO] - __main__ - (main.py).setup_middleware_first(136) - üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ middleware...
2025-11-16 22:40:16,687 - [INFO] - __main__ - (main.py).setup_middleware_first(140) - ‚úÖ AutoRegisterMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:40:16,687 - [INFO] - __main__ - (main.py).setup_middleware_first(148) - ‚úÖ ThrottlingMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è 16 –∫–æ–º–∞–Ω–¥
2025-11-16 22:40:16,687 - [INFO] - __main__ - (main.py).on_startup(239) - üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:40:16,687 - [INFO] - __main__ - (main.py).register_all_handlers(159) - üîÑ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:40:16,703 - [INFO] - root - (start.py).register_start_handler(778) - ‚úÖ –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,704 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ start –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,707 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ admin –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,708 - [INFO] - root - (shop.py).register_shop_handlers(483) - ‚úÖ –ú–∞–≥–∞–∑–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –ì–õ–û–ë–ê–õ–¨–ù–û–ô –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:40:16,708 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ shop –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,712 - [INFO] - handlers.donate - (donate.py)._init_bonus_table(128) - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ user_bonuses —Å–æ–∑–¥–∞–Ω–∞/–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
2025-11-16 22:40:16,712 - [INFO] - root - (donate.py).register_donate_handlers(955) - ‚úÖ –î–æ–Ω–∞—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –±–æ–Ω—É—Å–∞–º–∏ –∑–∞ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏)
2025-11-16 22:40:16,712 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ donate –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,714 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_main_menu
2025-11-16 22:40:16,714 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_admin_users_list
2025-11-16 22:40:16,714 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,715 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ reference –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,717 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ transfer –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,718 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ history_service –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,719 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ record –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,719 - [INFO] - venv - (gifts.py).register_gift_handlers(983) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ–¥–∞—Ä–∫–æ–≤
2025-11-16 22:40:16,720 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ gifts –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,722 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ marriage_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,723 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ roulette –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,725 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ police –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,727 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ thief –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,729 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(863) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç –∏—â–∏' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (–¢–û–ß–ù–´–ï –∫–æ–º–∞–Ω–¥—ã)
2025-11-16 22:40:16,729 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(864) - üìù –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –≤–∫–ª—é—á–µ–Ω –¥–ª—è 19 –∫–æ–º–∞–Ω–¥
2025-11-16 22:40:16,729 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(865) - üõ°Ô∏è ID —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞—â–∏—Ç—ã: [4]
2025-11-16 22:40:16,729 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_search_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,730 - [INFO] - handlers.chat_handlers - (chat_handlers.py).register_chat_handlers(126) - ‚úÖ Chat handlers registered
2025-11-16 22:40:16,730 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ chat_handlers –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,731 - [INFO] - handlers.bot_stop_handler - (bot_stop_handler.py).register_bot_stop_handlers(482) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç —Å—Ç–æ–ø' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∏ –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:40:16,731 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_stop_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:40:16,731 - [INFO] - __main__ - (main.py).register_all_handlers(183) - ‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –í—Å–µ–≥–æ: 17
2025-11-16 22:40:16,731 - [INFO] - venv - (gifts.py).ensure_gifts_on_startup(949) - üéÅ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:40:16,734 - [INFO] - venv - (gifts.py).ensure_gifts_exist(246) - ‚úÖ –í—Å–µ –ø–æ–¥–∞—Ä–∫–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ
2025-11-16 22:40:16,734 - [INFO] - __main__ - (main.py).setup_bot_ban_middleware(192) - ‚úÖ BotBanMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:40:16,734 - [INFO] - __main__ - (main.py).on_startup(250) - ‚è∞ –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:40:16,735 - [INFO] - __main__ - (main.py).start_cleanup_tasks(206) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –ë–î –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:40:16,735 - [INFO] - __main__ - (main.py).start_cleanup_tasks(211) - ‚úÖ –ó–∞–¥–∞—á–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –∑–∞–ø—É—â–µ–Ω—ã
2025-11-16 22:40:16,735 - [INFO] - handlers.admin.mute_ban - (mute_ban.py).restore_mutes_after_restart(204) - ‚è≠Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º—É—Ç–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
2025-11-16 22:40:16,735 - [INFO] - __main__ - (main.py).start_cleanup_tasks(215) - ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ –º—É—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
2025-11-16 22:40:16,735 - [INFO] - __main__ - (main.py).on_startup(253) - ‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:40:16,735 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(38) - üîÑ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:40:16,735 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(54) - ‚è∞ –°–ª–µ–¥—É—é—â–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ 4783 —Å–µ–∫—É–Ω–¥ (1.3 —á–∞—Å–æ–≤)
2025-11-16 22:40:16,735 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(358) - Start polling.
2025-11-16 22:40:21,160 - [ERROR] - asyncio - (base_events.py).default_exception_handler(1757) - Task exception was never retrieved
future: <Task finished name='Task-11' coro=<Dispatcher._process_polling_updates() done, defined at C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py:407> exception=ProgrammingError('(psycopg2.errors.UndefinedColumn) –û–®–ò–ë–ö–ê:  —Å—Ç–æ–ª–±–µ—Ü telegram_users.robberies_today –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç\nLINE 1: ...legram_users.is_admin AS telegram_users_is_admin, telegram_u...\n                                                             ^\n')>
Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: –û–®–ò–ë–ö–ê:  —Å—Ç–æ–ª–±–µ—Ü telegram_users.robberies_today –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
LINE 1: ...legram_users.is_admin AS telegram_users_is_admin, telegram_u...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 415, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 235, in process_updates
    return await asyncio.gather(*tasks)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\handler.py", line 117, in notify
    response = await handler_obj.handler(*args, **partial_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 256, in process_update
    return await self.message_handlers.notify(update.message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\handler.py", line 117, in notify
    response = await handler_obj.handler(*args, **partial_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "C:\RouletteBotTelegram\handlers\roulette\validators.py", line 49, in db_session
    yield db
  File "C:\RouletteBotTelegram\handlers\roulette\handlers.py", line 148, in show_balance
    user = UserRepository.get_user_by_telegram_id(db, user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\RouletteBotTelegram\database\crud.py", line 62, in get_user_by_telegram_id
    return db.query(models.TelegramUser).filter(models.TelegramUser.telegram_id == telegram_id).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) –û–®–ò–ë–ö–ê:  —Å—Ç–æ–ª–±–µ—Ü telegram_users.robberies_today –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
LINE 1: ...legram_users.is_admin AS telegram_users_is_admin, telegram_u...
                                                             ^

[SQL: SELECT telegram_users.id AS telegram_users_id, telegram_users.telegram_id AS telegram_users_telegram_id, telegram_users.username AS telegram_users_username, telegram_users.first_name AS telegram_users_first_name, telegram_users.last_name AS telegram_users_last_name, telegram_users.reference_link AS telegram_users_reference_link, telegram_users.coins AS telegram_users_coins, telegram_users.win_coins AS telegram_users_win_coins, telegram_users.defeat_coins AS telegram_users_defeat_coins, telegram_users.max_win_coins AS telegram_users_max_win_coins, telegram_users.min_win_coins AS telegram_users_min_win_coins, telegram_users.max_bet AS telegram_users_max_bet, telegram_users.is_admin AS telegram_users_is_admin, telegram_users.robberies_today AS telegram_users_robberies_today, telegram_users.last_robbery_reset AS telegram_users_last_robbery_reset, telegram_users.action AS telegram_users_action, telegram_users.duration_minutes AS telegram_users_duration_minutes 
FROM telegram_users 
WHERE telegram_users.telegram_id = %(telegram_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'telegram_id_1': 7326913977, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-16 22:40:23,899 - [INFO] - __main__ - (main.py).signal_handler(307) - üìû –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª 2. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...
2025-11-16 22:40:23,899 - [INFO] - __main__ - (main.py).on_shutdown(258) - üõë –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞...
2025-11-16 22:40:23,900 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(147) - üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:40:23,900 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(156) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:40:23,900 - [INFO] - __main__ - (main.py).on_shutdown(266) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:40:23,900 - [INFO] - __main__ - (main.py).on_shutdown(275) - ‚úÖ –ó–∞–¥–∞—á–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2025-11-16 22:40:23,900 - [INFO] - __main__ - (main.py).on_shutdown(283) - ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î –∑–∞–∫—Ä—ã—Ç—ã
2025-11-16 22:40:23,901 - [INFO] - __main__ - (main.py).on_shutdown(291) - ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∑–∞–∫—Ä—ã—Ç–æ
2025-11-16 22:40:23,901 - [INFO] - __main__ - (main.py).on_shutdown(298) - ‚úÖ –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:40:23,901 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).stop_polling(433) - Stop polling...
2025-11-16 22:40:23,901 - [ERROR] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(390) - Cause exception while getting updates.
Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 139, in make_request
    async with session.post(url, data=req, **kwargs) as response:
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 1488, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 770, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 748, in _connect_and_send_request
    await resp.start(conn)
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client_reqrep.py", line 532, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\streams.py", line 672, in read
    await self._waiter
aiohttp.client_exceptions.ServerDisconnectedError: Server disconnected

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 381, in start_polling
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\bot.py", line 110, in get_updates
    result = await self.request(api.Methods.GET_UPDATES, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\base.py", line 236, in request
    return await api.make_request(await self.get_session(), self.server, self.__token, method, data, files,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 142, in make_request
    raise exceptions.NetworkError(f"aiohttp client throws an error: {e.__class__.__name__}: {e}")
aiogram.utils.exceptions.NetworkError: Aiohttp client throws an error: ServerDisconnectedError: Server disconnected
2025-11-16 22:40:23,904 - [WARNING] - aiogram - (executor.py).start_polling(329) - Goodbye!
2025-11-16 22:43:51,442 - [INFO] - __main__ - (main.py).main(315) - üîÑ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
2025-11-16 22:43:51,793 - [INFO] - aiogram - (executor.py)._welcome(362) - Bot: —Ç–µ—Å—Ç–∞–π—Å [@testaicebot]
2025-11-16 22:43:52,010 - [WARNING] - aiogram - (executor.py)._skip_updates(358) - Updates were skipped successfully.
2025-11-16 22:43:52,010 - [INFO] - __main__ - (main.py).on_startup(224) - üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
2025-11-16 22:43:52,010 - [INFO] - __main__ - (main.py).on_startup(227) - üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:43:52,089 - [INFO] - __main__ - (main.py).setup_database(88) - ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω—ã
2025-11-16 22:43:52,091 - [INFO] - __main__ - (main.py).setup_database(95) - ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
2025-11-16 22:43:52,091 - [INFO] - __main__ - (main.py).on_startup(231) - üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:43:52,120 - [INFO] - __main__ - (main.py).cleanup_old_limits(120) - ‚úÖ –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –ª–∏–º–∏—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
2025-11-16 22:43:52,122 - [INFO] - __main__ - (main.py).setup_middleware_first(136) - üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ middleware...
2025-11-16 22:43:52,122 - [INFO] - __main__ - (main.py).setup_middleware_first(140) - ‚úÖ AutoRegisterMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:43:52,122 - [INFO] - __main__ - (main.py).setup_middleware_first(148) - ‚úÖ ThrottlingMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è 16 –∫–æ–º–∞–Ω–¥
2025-11-16 22:43:52,122 - [INFO] - __main__ - (main.py).on_startup(239) - üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:43:52,122 - [INFO] - __main__ - (main.py).register_all_handlers(159) - üîÑ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤...
2025-11-16 22:43:52,144 - [INFO] - root - (start.py).register_start_handler(778) - ‚úÖ –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,144 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ start –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,149 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ admin –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,150 - [INFO] - root - (shop.py).register_shop_handlers(483) - ‚úÖ –ú–∞–≥–∞–∑–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –ì–õ–û–ë–ê–õ–¨–ù–û–ô –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:43:52,150 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ shop –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,153 - [INFO] - handlers.donate - (donate.py)._init_bonus_table(128) - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ user_bonuses —Å–æ–∑–¥–∞–Ω–∞/–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
2025-11-16 22:43:52,154 - [INFO] - root - (donate.py).register_donate_handlers(955) - ‚úÖ –î–æ–Ω–∞—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –±–æ–Ω—É—Å–∞–º–∏ –∑–∞ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏)
2025-11-16 22:43:52,154 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ donate –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,155 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_main_menu
2025-11-16 22:43:52,155 - [INFO] - handlers.callback - (callback.py)._register_handler(94) - Successfully registered callback handler: handle_admin_users_list
2025-11-16 22:43:52,156 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,157 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ reference –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,160 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ transfer –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,161 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ history_service –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,163 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ record –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,164 - [INFO] - venv - (gifts.py).register_gift_handlers(983) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ–¥–∞—Ä–∫–æ–≤
2025-11-16 22:43:52,164 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ gifts –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,165 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ marriage_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,167 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ roulette –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,170 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ police –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,172 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ thief –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,174 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(863) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç –∏—â–∏' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (–¢–û–ß–ù–´–ï –∫–æ–º–∞–Ω–¥—ã)
2025-11-16 22:43:52,174 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(864) - üìù –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –≤–∫–ª—é—á–µ–Ω –¥–ª—è 19 –∫–æ–º–∞–Ω–¥
2025-11-16 22:43:52,175 - [INFO] - handlers.bot_search_handler - (bot_search_handler.py).register_bot_search_handlers(865) - üõ°Ô∏è ID —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞—â–∏—Ç—ã: [4]
2025-11-16 22:43:52,175 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_search_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,175 - [INFO] - handlers.chat_handlers - (chat_handlers.py).register_chat_handlers(126) - ‚úÖ Chat handlers registered
2025-11-16 22:43:52,175 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ chat_handlers –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,178 - [INFO] - handlers.bot_stop_handler - (bot_stop_handler.py).register_bot_stop_handlers(482) - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ '–±–æ—Ç —Å—Ç–æ–ø' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∏ –∑–∞—â–∏—Ç–æ–π)
2025-11-16 22:43:52,178 - [INFO] - __main__ - (main.py).register_all_handlers(176) - ‚úÖ bot_stop_handler –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2025-11-16 22:43:52,178 - [INFO] - __main__ - (main.py).register_all_handlers(183) - ‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –í—Å–µ–≥–æ: 17
2025-11-16 22:43:52,179 - [INFO] - venv - (gifts.py).ensure_gifts_on_startup(949) - üéÅ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...
2025-11-16 22:43:52,183 - [INFO] - venv - (gifts.py).ensure_gifts_exist(246) - ‚úÖ –í—Å–µ –ø–æ–¥–∞—Ä–∫–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ
2025-11-16 22:43:52,184 - [INFO] - __main__ - (main.py).setup_bot_ban_middleware(192) - ‚úÖ BotBanMiddleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2025-11-16 22:43:52,184 - [INFO] - __main__ - (main.py).on_startup(250) - ‚è∞ –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:43:52,185 - [INFO] - __main__ - (main.py).start_cleanup_tasks(206) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –ë–î –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:43:52,185 - [INFO] - __main__ - (main.py).start_cleanup_tasks(211) - ‚úÖ –ó–∞–¥–∞—á–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –∑–∞–ø—É—â–µ–Ω—ã
2025-11-16 22:43:52,185 - [INFO] - handlers.admin.mute_ban - (mute_ban.py).restore_mutes_after_restart(204) - ‚è≠Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º—É—Ç–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
2025-11-16 22:43:52,185 - [INFO] - __main__ - (main.py).start_cleanup_tasks(215) - ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ –º—É—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
2025-11-16 22:43:52,185 - [INFO] - __main__ - (main.py).on_startup(253) - ‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:43:52,185 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(38) - üîÑ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø—É—â–µ–Ω
2025-11-16 22:43:52,185 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).start_daily_cleanup(54) - ‚è∞ –°–ª–µ–¥—É—é—â–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ 4568 —Å–µ–∫—É–Ω–¥ (1.3 —á–∞—Å–æ–≤)
2025-11-16 22:43:52,185 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(358) - Start polling.
2025-11-16 22:44:06,199 - [INFO] - handlers.roulette_logs - (roulette_logs.py).add_game_log(37) - –î–æ–±–∞–≤–ª–µ–Ω –ª–æ–≥ —Ä—É–ª–µ—Ç–∫–∏ –¥–ª—è —á–∞—Ç–∞ -1003110392320: 2‚ö´
2025-11-16 22:44:07,243 - [INFO] - main - (validators.py).update_users_batch(75) - ‚úÖ –ü–∞–∫–µ—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2025-11-16 22:44:10,326 - [INFO] - __main__ - (main.py).signal_handler(307) - üìû –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª 2. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...
2025-11-16 22:44:10,326 - [INFO] - __main__ - (main.py).on_shutdown(258) - üõë –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞...
2025-11-16 22:44:10,326 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(147) - üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏...
2025-11-16 22:44:10,326 - [INFO] - handlers.cleanup_scheduler - (cleanup_scheduler.py).stop(156) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:44:10,326 - [INFO] - __main__ - (main.py).on_shutdown(266) - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:44:10,326 - [INFO] - __main__ - (main.py).on_shutdown(275) - ‚úÖ –ó–∞–¥–∞—á–∏ –º—É—Ç–æ–≤/–±–∞–Ω–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2025-11-16 22:44:10,326 - [INFO] - __main__ - (main.py).on_shutdown(283) - ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î –∑–∞–∫—Ä—ã—Ç—ã
2025-11-16 22:44:10,327 - [INFO] - __main__ - (main.py).on_shutdown(291) - ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∑–∞–∫—Ä—ã—Ç–æ
2025-11-16 22:44:10,327 - [INFO] - __main__ - (main.py).on_shutdown(298) - ‚úÖ –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2025-11-16 22:44:10,327 - [INFO] - aiogram.dispatcher.dispatcher - (dispatcher.py).stop_polling(433) - Stop polling...
2025-11-16 22:44:10,328 - [ERROR] - aiogram.dispatcher.dispatcher - (dispatcher.py).start_polling(390) - Cause exception while getting updates.
Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 139, in make_request
    async with session.post(url, data=req, **kwargs) as response:
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 1488, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 770, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client.py", line 748, in _connect_and_send_request
    await resp.start(conn)
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\client_reqrep.py", line 532, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiohttp\streams.py", line 672, in read
    await self._waiter
aiohttp.client_exceptions.ServerDisconnectedError: Server disconnected

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 381, in start_polling
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\bot.py", line 110, in get_updates
    result = await self.request(api.Methods.GET_UPDATES, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\base.py", line 236, in request
    return await api.make_request(await self.get_session(), self.server, self.__token, method, data, files,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\bekak\PycharmProjects\Bek_32-2_hw-master\.venv\Lib\site-packages\aiogram\bot\api.py", line 142, in make_request
    raise exceptions.NetworkError(f"aiohttp client throws an error: {e.__class__.__name__}: {e}")
aiogram.utils.exceptions.NetworkError: Aiohttp client throws an error: ServerDisconnectedError: Server disconnected
2025-11-16 22:44:10,332 - [WARNING] - aiogram - (executor.py).start_polling(329) - Goodbye!
